{% extends "!layout.html" %}

{%- block extrahead %}
  {{ super() }}

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SH9M3SGZK6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-SH9M3SGZK6');
  </script>

  <!-- Fix NIST footer positioning after injection -->
  <script>
    // Wait for NIST header-footer script to inject content
    document.addEventListener('DOMContentLoaded', function() {
      // Use MutationObserver to detect when NIST footer is added
      const observer = new MutationObserver(function(mutations) {
        const nistFooter = document.querySelector('[class*="nist-footer"], [id*="nist-footer"], footer[class*="nist"]');
        const nistHeader = document.querySelector('[class*="nist-header"], [id*="nist-header"], header[class*="nist"]');

        if (nistFooter) {
          nistFooter.style.position = 'relative';
          nistFooter.style.marginTop = '2rem';
          nistFooter.style.clear = 'both';
        }

        if (nistHeader) {
          nistHeader.style.position = 'relative';
        }

        // Stop observing once we've found and fixed the elements
        if (nistFooter && nistHeader) {
          observer.disconnect();
        }
      });

      // Start observing the document body for added nodes
      observer.observe(document.body, {
        childList: true,
        subtree: true
      });

      // Fallback: stop observing after 5 seconds
      setTimeout(function() { observer.disconnect(); }, 5000);
    });
  </script>
{%- endblock %}
